# 用户管理页面编辑功能说明

## 功能概述

本页面为用户管理提供了完整的单条数据编辑功能，包括编辑、删除、查看等操作。

## 主要功能

### 1. 操作列

- 每行数据都有操作列，包含编辑、删除、查看按钮
- 操作列固定在表格右侧，宽度200px

### 2. 编辑功能

- 点击"编辑"按钮打开编辑模态框
- 支持修改用户昵称、密码、账号状态等
- 密码字段可选，留空则不修改
- 包含完整的表单验证

### 3. 删除功能

- 点击"删除"按钮删除单条用户记录
- 删除前会弹出确认对话框
- 删除成功后自动刷新数据

### 4. 查看功能

- 点击"查看"按钮查看用户详细信息
- 以只读方式展示用户完整信息
- 包含创建时间、更新时间等

### 5. 批量操作

- 支持批量删除、启用、禁用操作
- 需要先选择要操作的用户
- 操作完成后自动清空选择并刷新数据

## 组件结构

### UserEditModal.vue

编辑用户信息的模态框组件

- 表单验证：昵称必填、密码长度验证、确认密码一致性
- 状态开关：启用/禁用、账号状态等
- 密码可选：留空则不修改密码

### UserViewModal.vue

查看用户详情的模态框组件

- 只读信息展示
- 格式化日期时间显示
- 状态标签展示

### API封装 (user.ts)

完整的用户管理API封装

- CRUD操作：增删改查
- 批量操作：批量删除、启用、禁用
- 错误处理：统一的错误处理机制

## 使用方式

### 编辑用户

```javascript
// 点击编辑按钮
function handleEdit(record: any) {
  currentEditUser.value = record
  editModalVisible.value = true
}

// 提交编辑
function handleEditSubmit(data: any) {
  updateUser(currentEditUser.value.id, data)
    .then(() => {
      message.success('用户信息更新成功')
      editModalVisible.value = false
      loadData() // 重新加载数据
    })
}
```

### 删除用户

```javascript
function handleDelete(record: any) {
  if (confirm(`确定要删除用户 ${record.username} 吗？`)) {
    deleteUser(record.id)
      .then(() => {
        message.success('用户删除成功')
        loadData()
      })
  }
}
```

## 样式特性

- 响应式设计，适配不同屏幕尺寸
- 统一的视觉风格，符合Ant Design规范
- 友好的交互反馈，包含加载状态和消息提示
- 紧凑的操作按钮设计，节省空间

## 扩展功能

### 1. 新建用户

- 可以基于编辑组件扩展新建功能
- 需要修改表单验证规则（用户名必填）

### 2. 高级搜索

- 可以添加更多搜索条件
- 支持日期范围、状态筛选等

### 3. 数据导出

- 可以添加导出功能
- 支持Excel、CSV等格式

### 4. 权限控制

- 可以基于用户角色控制操作权限
- 隐藏或禁用某些操作按钮

## 注意事项

1. 确保后端API接口正确实现
2. 注意密码字段的安全性处理
3. 批量操作时注意性能优化
4. 错误处理要完善，提供友好的错误提示
5. 表单验证要严格，防止无效数据提交
