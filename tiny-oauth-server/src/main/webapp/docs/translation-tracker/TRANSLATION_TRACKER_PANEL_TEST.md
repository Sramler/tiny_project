# 翻译调用追踪器面板测试指南

## 功能概述

翻译调用追踪器面板是一个覆盖在 BPMN 编辑器上的浮动面板，类似于翻译调试面板，用于实时监控和分析翻译调用情况。

## 测试步骤

### 1. 启动应用

```bash
cd tiny-oauth-server/src/main/webapp
npm run dev
```

### 2. 访问工作流设计器

打开浏览器访问：`http://localhost:5173/workflowDesign`

### 3. 查看面板按钮

在工作流设计器页面的右上角，您应该能看到两个按钮：

- 🔍 开启翻译调试（DebugI18nPanel）
- 📊 开启追踪器（TranslationCallTrackerPanel）

### 4. 测试翻译调用追踪器面板

1. **点击追踪器按钮**

   - 点击右上角的 "📊 开启追踪器" 按钮
   - 面板应该覆盖整个 BPMN 容器区域

2. **查看面板内容**

   - 面板标题：翻译调用追踪器
   - 系统状态：显示翻译系统加载状态和实时连接状态
   - 控制按钮：刷新统计、导出报告、清除历史、自动刷新
   - 筛选功能：按来源、组件、翻译键筛选
   - 调用历史表格：显示翻译调用记录

3. **测试实时功能**

   - 在 BPMN 编辑器中进行操作（如拖拽元素、编辑属性等）
   - 观察追踪器面板中的调用历史是否实时更新
   - 检查实时连接状态是否显示为 "🔄 实时连接"

4. **测试筛选功能**

   - 使用来源下拉框筛选特定来源的调用
   - 使用组件下拉框筛选特定组件的调用
   - 使用搜索框搜索特定的翻译键

5. **测试控制功能**

   - 点击"刷新统计"按钮
   - 点击"导出报告"按钮（查看控制台输出）
   - 点击"清除历史"按钮
   - 点击"开始自动刷新"按钮

6. **关闭面板**
   - 点击面板右上角的 "×" 按钮
   - 面板应该关闭，显示底层的 BPMN 编辑器

### 5. 测试跨页面通信

1. **打开翻译调用追踪器页面**

   - 在新标签页中打开：`http://localhost:5175/translationCallTracker`

2. **同时操作两个页面**

   - 在工作流设计器中进行操作
   - 观察翻译调用追踪器页面是否实时接收数据

3. **验证实时连接**
   - 检查两个页面的实时连接状态
   - 确认数据同步正常

## 预期结果

### 面板显示

- ✅ 面板正确覆盖在 BPMN 容器上
- ✅ 面板内容完整显示
- ✅ 按钮和控件正常工作
- ✅ 样式美观，符合设计规范

### 实时功能

- ✅ 翻译调用实时记录
- ✅ 统计数据实时更新
- ✅ 连接状态正确显示
- ✅ 跨页面通信正常

### 交互功能

- ✅ 筛选功能正常工作
- ✅ 分页功能正常
- ✅ 控制按钮响应正确
- ✅ 关闭功能正常

## 故障排除

### 面板不显示

1. 检查浏览器控制台是否有错误
2. 确认组件正确导入
3. 检查 CSS 样式是否正确加载

### 实时数据不更新

1. 确认翻译系统已正确初始化
2. 检查跨页面通信是否正常工作
3. 查看 localStorage 中是否有数据

### 样式问题

1. 检查 CSS 类名是否正确
2. 确认 z-index 设置合理
3. 验证响应式布局

## 性能测试

### 大量数据处理

1. 快速进行大量翻译调用
2. 观察面板响应速度
3. 检查内存使用情况

### 长时间运行

1. 保持面板开启状态
2. 持续进行翻译操作
3. 监控内存泄漏

## 兼容性测试

### 浏览器兼容性

- Chrome ✅
- Firefox ✅
- Safari ✅
- Edge ✅

### 屏幕尺寸

- 桌面端 ✅
- 平板端 ✅
- 移动端 ⚠️（可能需要调整布局）

## 总结

翻译调用追踪器面板成功集成到翻译模块中，提供了：

- 实时翻译调用监控
- 跨页面数据同步
- 丰富的筛选和分析功能
- 良好的用户体验

该功能与翻译调试面板配合使用，为 BPMN 翻译系统提供了完整的监控和分析工具。
