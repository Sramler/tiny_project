logging:
  level:
    org.springframework.security: DEBUG
    org.springframework.security.oauth2: DEBUG
    root: debug
# Spring Boot åº”ç”¨åç§°
spring:
  jmx:
    enabled: false
  application:
    name: tiny_web
  datasource:
    url: jdbc:mysql://localhost:3306/tiny_web?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC&characterEncoding=utf8&serverTimezone=Asia/Shanghai
    username: root
    password: Tianye0903.
    driver-class-name: com.mysql.cj.jdbc.Driver

    hikari:
      minimum-idle: 5 # HikariCP è¿æ¥æ± æœ€å°ç©ºé—²è¿æ¥æ•°ï¼Œé»˜è®¤10
      maximum-pool-size: 20 # HikariCP è¿æ¥æ± æœ€å¤§è¿æ¥æ•°ï¼Œé»˜è®¤10
      idle-timeout: 30000 # HikariCP è¿æ¥æ± ä¸­è¿æ¥æœ€å¤§ç©ºé—²æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œé»˜è®¤600000ï¼ˆ10åˆ†é’Ÿï¼‰
      pool-name: HikariCP # HikariCP è¿æ¥æ± åç§°ï¼Œé»˜è®¤HikariPool-1
      max-lifetime: 1800000 # HikariCP è¿æ¥çš„æœ€å¤§å­˜æ´»æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œé»˜è®¤1800000ï¼ˆ30åˆ†é’Ÿï¼‰
      connection-timeout: 30000 # HikariCP è·å–è¿æ¥çš„æœ€å¤§ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œé»˜è®¤30000ï¼ˆ30ç§’ï¼‰
      auto-commit: true # HikariCP æ˜¯å¦è‡ªåŠ¨æäº¤ï¼Œé»˜è®¤true
  jpa:
    hibernate:
      ddl-auto: update # JPA è‡ªåŠ¨å»ºè¡¨ç­–ç•¥ï¼Œupdateä¸ºè‡ªåŠ¨æ›´æ–°è¡¨ç»“æ„
    show-sql: true # æ˜¯å¦æ˜¾ç¤ºSQLè¯­å¥ï¼Œå¼€å‘æ—¶å»ºè®®å¼€å¯
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect # æŒ‡å®šHibernateä½¿ç”¨çš„MySQLæ–¹è¨€
        format_sql: true

  web:
    resources:
      add-mappings: false # ğŸš« ç¦ç”¨ Spring Boot å¯¹ /staticã€/public ç­‰è·¯å¾„çš„é»˜è®¤èµ„æºæ˜ å°„
  mvc:
    throw-exception-if-no-handler-found: true

server:
  error:
    whitelabel:
      enabled: false # ğŸš« ç¦ç”¨ç™½æ ‡ç­¾é”™è¯¯é¡µï¼ˆWhitelabel Error Pageï¼‰ï¼Œé˜²æ­¢åç«¯è¾“å‡º HTML é”™è¯¯é¡µé¢
# JWT å¯†é’¥ï¼ˆBase64 ç¼–ç ï¼‰
authentication:
  jwt:
    public-key-path: classpath:keys/public.pem
    private-key-path: classpath:keys/private.pem
  clients:
    - client-id: admin-app
      client-secret: admin-app
      authentication-methods: [client_secret_basic]
      grant-types: [authorization_code, password, refresh_token]
      redirect-uris:
        - http://localhost:8080/login/oauth2/code/admin
      scopes: [read, write]

    - client-id: web-frontend
      client-secret: web-frontend
      authentication-methods: [client_secret_basic]
      grant-types: [authorization_code, refresh_token]
      redirect-uris:
        - http://localhost:5173/login/oauth2/code/web
      post-logout-redirect-uris:
        - http://localhost:5173/logout/success
      scopes: [openid, profile, email]
